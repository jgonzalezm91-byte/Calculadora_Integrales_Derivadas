<!DOCTYPE html>
<!-- Programa por José González y Emanuel Santizo -->
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Cálculo Diferencial e Integral</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Estilos externos -->
    <link rel="stylesheet" href="style.css">

    <!-- Math.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/12.4.0/math.js"></script>
</head>

<body class="p-4 sm:p-8 flex justify-center min-h-screen">
    <!-- Fondo y partículas -->
    <div class="fondo-galaxia"></div>
    <canvas id="particulas"></canvas>

    <!-- Contenedor principal -->
    <div class="w-full max-w-lg p-6 sm:p-8 rounded-xl card my-10">
        <h1 class="text-3xl font-bold text-gray-800 mb-4 text-center">Calculadora de Funciones</h1>

        <!-- Créditos -->
        <div class="mb-6 p-3 bg-indigo-50 border-l-4 border-indigo-400 rounded-md text-sm text-gray-700">
            <h3 class="font-semibold text-indigo-700 mb-1">Créditos de Desarrollo:</h3>
            <p>José Daniel González Monroy: 5390-24-19904</p>
            <p>Ernesto Emanuel Santizo Santizo: 1990-24-1077</p>
        </div>

        <p class="text-gray-600 mb-6 text-center">Introduce la función y selecciona el cálculo deseado.</p>

        <!-- Campo de función -->
        <div class="mb-4">
            <label for="entradaFuncion" class="block text-sm font-medium text-gray-700 mb-1">Función f(x)</label>
            <input type="text" id="entradaFuncion" placeholder="Ej: exp(-x^2) * sen(x) + ln(x)"
                   class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition duration-150 text-right">

            <div class="mt-1 text-xs text-gray-400 p-1 border-b border-gray-100">
                <p><strong>Ejemplo Derivada:</strong> <code class="bg-gray-50 p-0.5 rounded">x^3 + cos(2*x)</code></p>
                <p><strong>Ejemplo Integral:</strong> <code class="bg-gray-50 p-0.5 rounded">1 / x</code></p>
            </div>
        </div>

        <!-- Variable -->
        <div class="mb-6 flex flex-col items-center">
            <label for="entradaVariable" class="block text-sm font-medium text-gray-700 mb-1">Variable de Cálculo</label>
            <input type="text" id="entradaVariable" value="x"
                   class="w-14 h-14 p-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-center text-xl font-semibold">
        </div>

        <!-- Teclado -->
        <div class="mb-6 border-t pt-4">
            <h3 class="text-sm font-medium text-gray-700 mb-2">Teclado Rápido:</h3>
            <div class="grid grid-cols-5 sm:grid-cols-7 grid-teclado">
                <button class="tecla-base btn-func" onclick="insertarTexto('sin(')">sen(x)</button>
                <button class="tecla-base btn-func" onclick="insertarTexto('cos(')">cos(x)</button>
                <button class="tecla-base btn-func" onclick="insertarTexto('tan(')">tan(x)</button>
                <button class="tecla-base btn-func" onclick="insertarTexto('log(')">ln(x)</button>
                <button class="tecla-base btn-func" onclick="insertarTexto('exp(')">e^x</button>
                <button class="tecla-base btn-clear col-span-2" onclick="limpiarEntrada()">Borrar Todo (C)</button>

                <button class="tecla-base btn-num" onclick="insertarTexto('7')">7</button>
                <button class="tecla-base btn-num" onclick="insertarTexto('8')">8</button>
                <button class="tecla-base btn-num" onclick="insertarTexto('9')">9</button>
                <button class="tecla-base btn-op" onclick="insertarTexto('/')">/</button>
                <button class="tecla-base btn-op" onclick="insertarTexto('*')">*</button>
                <button class="tecla-base btn-op" onclick="insertarTexto('(')">(</button>
                <button class="tecla-base btn-op" onclick="insertarTexto(')')">)</button>

                <button class="tecla-base btn-num" onclick="insertarTexto('4')">4</button>
                <button class="tecla-base btn-num" onclick="insertarTexto('5')">5</button>
                <button class="tecla-base btn-num" onclick="insertarTexto('6')">6</button>
                <button class="tecla-base btn-op" onclick="insertarTexto('-')">-</button>
                <button class="tecla-base btn-op" onclick="insertarTexto('+')">+</button>
                <button class="tecla-base btn-op" onclick="insertarTexto('^')">^</button>
                <button class="tecla-base btn-op" onclick="insertarTexto('.')">.</button>

                <button class="tecla-base btn-num" onclick="insertarTexto('1')">1</button>
                <button class="tecla-base btn-num" onclick="insertarTexto('2')">2</button>
                <button class="tecla-base btn-num" onclick="insertarTexto('3')">3</button>
                <button class="tecla-base btn-func col-start-4" onclick="insertarTexto('pi')">π</button>
                <button class="tecla-base btn-func" onclick="insertarTexto('e')">e</button>
                <button class="tecla-base btn-func" onclick="insertarTexto('x')">x</button>
                <div class="tecla-base btn-num bg-transparent border-transparent"></div>

                <div class="tecla-base btn-num bg-transparent border-transparent"></div>
                <button class="tecla-base btn-num" onclick="insertarTexto('0')">0</button>
                <div class="tecla-base btn-num bg-transparent border-transparent"></div>
            </div>
        </div>

        <!-- Derivada -->
        <div class="calculation-section border-indigo-300">
            <h2 class="text-lg font-bold text-indigo-700 mb-3">Cálculo de Derivada (Simbólica)</h2>
            <button onclick="calcularDerivada()"
                    class="w-full px-4 py-3 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition duration-150 ease-in-out transform hover:scale-[1.01] text-sm sm:text-base">
                Derivar Función
            </button>
        </div>

        <!-- Integral -->
        <div class="calculation-section border-green-300">
            <h2 class="text-lg font-bold text-green-700 mb-3">Cálculo de Integral (Numérica)</h2>
            <div class="grid grid-cols-2 gap-4 mb-4">
                <div>
                    <label for="limiteInferior" class="block text-sm font-medium text-gray-700 mb-1">Primer Límite (a)</label>
                    <input type="number" id="limiteInferior" placeholder="Límite Inferior" value="0"
                           class="w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 text-center">
                </div>
                <div>
                    <label for="limiteSuperior" class="block text-sm font-medium text-gray-700 mb-1">Segundo Límite (b)</label>
                    <input type="number" id="limiteSuperior" placeholder="Límite Superior" value="1"
                           class="w-full p-3 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 text-center">
                </div>
            </div>
            <button onclick="calcularIntegralDefinida()"
                    class="w-full px-4 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition duration-150 ease-in-out transform hover:scale-[1.01] text-sm sm:text-base">
                Calcular Integral Definida
            </button>
        </div>

        <!-- Resultados -->
        <div class="bg-gray-100 p-4 rounded-lg border border-gray-200 mt-6">
            <h2 class="text-xl font-semibold text-gray-800 mb-2">Resultado:</h2>
            <p id="areaResultado" class="text-gray-900 break-words min-h-[40px] flex items-center">Esperando cálculo...</p>
        </div>

        <!-- Nota -->
        <div id="mensajeIntegral" class="mt-4 p-3 bg-yellow-100 border border-yellow-200 text-yellow-700 rounded-lg hidden">
            <strong>Nota sobre la Integral:</strong> El resultado de la integral definida es una <strong>aproximación numérica</strong> basada en 10,000 pasos (Regla del Trapecio).
        </div>
    </div>

    <!-- Script externo -->
    <script src="script.js"></script>
</body>
</html>
